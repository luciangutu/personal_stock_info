<!DOCTYPE html>
<html>
<head>
    <title>Stock Information</title>
    <style>
        body {
            font-size: 14px;
        }
        .section {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .help-tip {
            display: inline-block;
            cursor: help;
        }
        .help-tip::after {
            content: " ⓘ";
            font-size: 12px;
            color: #666;
            margin-left: 5px;
        }
        .above-1 {
            color: red;
        }
        .above-50 {
            color: red;
        }
        .below-1 {
            color: red;
        }
        .negative {
            color: red;
        }
        .green {
            color: green;
        }
        .red {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Stock Information</h1>
    <form method="post">
        <label for="stock_ticker">Enter Stock Ticker:</label>
        <input type="text" id="stock_ticker" name="stock_ticker">
        <button type="submit">Get Information</button>
    </form>
    {% if stock_info %}
        {% if stock_info.error %}
            <p>{{ stock_info.error }}</p>
        {% else %}
            <h2>{{ stock_info.longName }} - {{ stock_info.website }}</h2>
            <div class="section">
                <h3>Price Information:</h3>
                <p><strong>Current Price:</strong> {{ stock_info.currentPrice }}</p>
                <p><strong>DCF:</strong>
                    <span class="{% if stock_info.dcf > stock_info.currentPrice %}green{% else %}red{% endif %}">
                        {{ stock_info.dcf }}
                    </span>
                </p>
                <p><strong>Market Day Low Price:</strong>
                    <span class="help-tip" title="The lowest price the stock has reached during the current trading session">{{ stock_info.regularMarketDayLow }}</span>
                </p>
                <p><strong>Market Day High Price:</strong>
                    <span class="help-tip" title="The highest price the stock has reached during the current trading session">{{ stock_info.regularMarketDayHigh }}</span>
                </p>
                <p><strong>Previous Close Price:</strong>
                    <span class="help-tip" title="The closing price of the previous trading day">{{ stock_info.regularMarketPreviousClose }}</span>
                </p>
            </div>
            <div class="section">
                <h3>Financial Information:</h3>
                <p><strong>Trailing PE (Price-to-Earnings):</strong>
                    <span class="help-tip {% if stock_info.trailingPE != 'N/A' and stock_info.trailingPE | float > 50 %}above-50{% endif %}" title="Ratio of a company's current stock price to its earnings per share (EPS) over the past twelve months (or four quarters). It indicates how much investors are willing to pay for each dollar of earnings generated by the company in the past.">{{ stock_info.trailingPE }}</span>
                </p>
                <p><strong>Forward PE (Forward Price-to-Earnings):</strong>
                    <span class="help-tip {% if stock_info.forwardPE != 'N/A' and stock_info.forwardPE | float > 50 %}above-50{% endif %}" title="Ratio of a company's current stock price to its estimated earnings per share (EPS) for a future period, typically the next twelve months.">{{ stock_info.forwardPE }}</span>
                </p>
                <p><strong>Price to Sales Trailing 12 Months:</strong>
                    <span class="help-tip {% if stock_info.priceToSalesTrailing12Months != 'N/A' and stock_info.priceToSalesTrailing12Months | float > 50 %}above-50{% endif %}" title="Measures the valuation of a company's stock relative to its revenue generated over the past twelve months.">{{ stock_info.priceToSalesTrailing12Months }}</span>
                </p>
                <p><strong>Book Value:</strong>
                    <span class="help-tip {% if stock_info.bookValue != 'N/A' and stock_info.bookValue | float > 50 %}above-50{% endif %}" title="Also known as 'Net Asset Value' or 'Equity Value', represents the value of a company's assets minus its liabilities. Book Value = Total Assets - Total Liabilities">{{ stock_info.bookValue }}</span>
                </p>
                <p><strong>Price to Book (P/B) Ratio:</strong>
                    <span class="help-tip {% if stock_info.priceToBook != 'N/A' and stock_info.priceToBook | float > 50 %}above-50{% endif %}" title="Price to Book (P/B) Ratio = Current Stock Price / Book Value per Share. It's used by investors to determine whether a stock is undervalued or overvalued relative to its book value. A lower P/B ratio might suggest that a stock is trading below its intrinsic value, while a higher P/B ratio might indicate that the stock is trading at a premium.">{{ stock_info.priceToBook }}</span>
                </p>
                <p><strong>Earnings Quarterly Growth:</strong>
                    <span class="help-tip {% if stock_info.earningsQuarterlyGrowth != 'N/A' and stock_info.earningsQuarterlyGrowth | float < 1 %}below-1{% endif %}" title="Measures the percentage change in a company's earnings (profit) from one quarter to another.">{{ stock_info.earningsQuarterlyGrowth }}%</span>
                </p>
                <p><strong>Trailing Earnings Per Share:</strong>
                    <span class="help-tip {% if stock_info.trailingEps != 'N/A' and stock_info.trailingEps | float < 0 %}negative{% endif %}" title="Represents the portion of a company's earnings that is allocated to each outstanding share of its common stock over the trailing twelve months (last four quarters).">{{ stock_info.trailingEps }}</span>
                </p>
                <p><strong>Forward Earnings Per Share:</strong>
                    <span class="help-tip {% if stock_info.forwardEps != 'N/A' and stock_info.forwardEps | float < 0 %}negative{% endif %}" title="Represents the estimated earnings per share (EPS) of a company for a future period, typically the next twelve months (or sometimes the next fiscal year). EPS is calculated by dividing a company's net earnings (profit) by the number of outstanding shares of its common stock.">{{ stock_info.forwardEps }}</span>
                </p>
                <p><strong>Price/Earnings to Growth (PEG):</strong>
                    <span class="help-tip {% if stock_info.pegRatio != 'N/A' and stock_info.pegRatio | float < 0 %}above-1{% endif %}" title="Is used to assess the valuation of a company's stock relative to its earnings growth potential. PEG = (P/E Ratio) / (Earnings Growth Rate). A PEG ratio of 1 is often considered fair value, as it suggests that the stock's valuation is in line with its earnings growth rate. A PEG ratio below 1 might indicate that the stock is undervalued relative to its growth potential, while a PEG ratio above 1 might suggest that the stock is overvalued compared to its projected growth rate.">{{ stock_info.pegRatio }}</span>
                </p>
                <p><strong>Total Revenue:</strong>
                    <span>{{ stock_info.totalRevenue }}</span>
                </p>
                <p><strong>Total Debt:</strong>
                    <span>{{ stock_info.totalDebt }}</span>
                </p>
                <p><strong>Gross Profit:</strong>
                    <span class="{% if stock_info.grossProfits < 0 %}red{% endif %}">
                        {{ stock_info.grossProfits }}
                    </span>
                </p>
                <p><strong>Free Cash Flow:</strong>
                    <span class="help-tip {% if stock_info.freeCashflow < 0 %}red{% endif %}" title="Represents the amount of cash generated by a company's operations after accounting for capital expenditures (CAPEX) and working capital requirements. Free Cash Flow=Operating Cash Flow − Capital Expenditures">{{ stock_info.freeCashflow }}</span>
                </p>
                <p><strong>Operating Cash Flow:</strong>
                    <span class="help-tip {% if stock_info.operatingCashflow < 0 %}red{% endif %}" title="Represents the net amount of cash generated by a company's core operating activities. It includes cash inflows from sales of goods or services, as well as cash outflows for operating expenses, taxes, and other operational costs.">{{ stock_info.operatingCashflow }}</span>
                </p>
                <p><strong>Debt to Equity:</strong>
                    <span class="help-tip {% if stock_info.debtToEquity != 'N/A' and stock_info.debtToEquity | float > 50 %}above-50{% endif %}" title="Is a financial ratio that measures the proportion of a company's total debt to its shareholders' equity. A higher ratio indicates that the company is relying more on debt financing, which could increase financial risk and interest expense. On the other hand, a lower ratio suggests that the company is more reliant on equity financing.">{{ stock_info.debtToEquity }}</span>
                </p>
                <p><strong>Revenue Per Share:</strong>
                    <span class="help-tip {% if stock_info.revenuePerShare != 'N/A' and stock_info.revenuePerShare | float > 50 %}above-50{% endif %}" title="By dividing total revenue by the number of outstanding shares, you get an idea of how much revenue each individual share contributes.">{{ stock_info.revenuePerShare }}</span>
                </p>
                <p><strong>Total Assets:</strong>
                    <span>{{ stock_info.totalAssets }}</span>
                </p>
                <p><strong>Total Liabilities:</strong>
                    <span class="{% if stock_info.totalAssets > stock_info.totalLiabilities %}green{% else %}red{% endif %}">
                        {{ stock_info.totalLiabilities }}
                    </span>
                </p>
            </div>
        {% endif %}
    {% endif %}
</body>
</html>
